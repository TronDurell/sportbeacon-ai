# Internationalization API Documentation

## Overview
The I18n API provides language detection, translation services, and locale management for global community support.

## Base URL
```
https://api.sportbeacon.ai/v1/i18n
```

## Authentication
All requests require a valid API key in the header:
```
Authorization: Bearer YOUR_API_KEY
```

## Endpoints

### Detect Language
**POST** `/detect`

Automatically detects the language of provided text.

#### Request Body
```json
{
  "text": "Welcome to SportBeaconAI"
}
```

#### Response
```json
{
  "success": true,
  "locale": "en",
  "confidence": 0.95,
  "detectedText": "Welcome to SportBeaconAI"
}
```

### Translate Prompt
**POST** `/translate/prompt`

Translates AI prompts to target language.

#### Request Body
```json
{
  "prompt": "Analyze this sports performance",
  "targetLocale": "es"
}
```

#### Response
```json
{
  "success": true,
  "original": "Analyze this sports performance",
  "translated": "Analiza este rendimiento deportivo",
  "sourceLocale": "en",
  "targetLocale": "es",
  "confidence": 0.92
}
```

### Translate Key
**GET** `/translate/key/{key}/{locale}`

Translates predefined translation keys.

#### Response
```json
{
  "success": true,
  "key": "welcome_message",
  "locale": "es",
  "translation": "Bienvenido a SportBeaconAI"
}
```

### Set User Locale
**POST** `/users/{userId}/locale`

Sets the preferred language for a user.

#### Request Body
```json
{
  "locale": "es"
}
```

#### Response
```json
{
  "success": true,
  "userId": "user123",
  "locale": "es",
  "updatedAt": "2024-01-01T12:00:00Z"
}
```

### Get User Locale
**GET** `/users/{userId}/locale`

Retrieves the user's preferred language.

#### Response
```json
{
  "success": true,
  "userId": "user123",
  "locale": "es",
  "lastUpdated": "2024-01-01T12:00:00Z"
}
```

### Get Supported Locales
**GET** `/locales`

Returns list of supported languages.

#### Response
```json
{
  "success": true,
  "locales": [
    {
      "code": "en",
      "name": "English",
      "nativeName": "English"
    },
    {
      "code": "es",
      "name": "Spanish",
      "nativeName": "Español"
    },
    {
      "code": "fr",
      "name": "French",
      "nativeName": "Français"
    }
  ]
}
```

## Supported Languages

| Code | Language | Native Name |
|------|----------|-------------|
| en | English | English |
| es | Spanish | Español |
| fr | French | Français |
| de | German | Deutsch |
| it | Italian | Italiano |
| pt | Portuguese | Português |
| ru | Russian | Русский |
| zh | Chinese | 中文 |
| ja | Japanese | 日本語 |
| ko | Korean | 한국어 |
| ar | Arabic | العربية |
| hi | Hindi | हिन्दी |
| bn | Bengali | বাংলা |
| tr | Turkish | Türkçe |
| nl | Dutch | Nederlands |
| sv | Swedish | Svenska |
| no | Norwegian | Norsk |
| da | Danish | Dansk |
| fi | Finnish | Suomi |
| pl | Polish | Polski |

## Error Responses

### 400 Bad Request
```json
{
  "success": false,
  "error": "Invalid locale",
  "details": "Unsupported locale: xx"
}
```

### 404 Not Found
```json
{
  "success": false,
  "error": "Translation key not found",
  "key": "nonexistent_key"
}
```

### 500 Internal Server Error
```json
{
  "success": false,
  "error": "Translation service unavailable",
  "details": "Service temporarily down"
}
```

## Example Usage

### cURL Examples

#### Detect Language
```bash
curl -X POST https://api.sportbeacon.ai/v1/i18n/detect \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "text": "Bienvenido a SportBeaconAI"
  }'
```

#### Translate Prompt
```bash
curl -X POST https://api.sportbeacon.ai/v1/i18n/translate/prompt \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "prompt": "Analyze this sports performance",
    "targetLocale": "es"
  }'
```

#### Set User Locale
```bash
curl -X POST https://api.sportbeacon.ai/v1/i18n/users/user123/locale \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "locale": "es"
  }'
```

### JavaScript Example
```javascript
class I18nClient {
  constructor(apiKey) {
    this.apiKey = apiKey;
    this.baseUrl = 'https://api.sportbeacon.ai/v1/i18n';
  }

  async detectLanguage(text) {
    const response = await fetch(`${this.baseUrl}/detect`, {
      method: 'POST',
      headers: {
        'Authorization': `Bearer ${this.apiKey}`,
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({ text })
    });
    
    return response.json();
  }

  async translatePrompt(prompt, targetLocale) {
    const response = await fetch(`${this.baseUrl}/translate/prompt`, {
      method: 'POST',
      headers: {
        'Authorization': `Bearer ${this.apiKey}`,
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({ prompt, targetLocale })
    });
    
    return response.json();
  }

  async setUserLocale(userId, locale) {
    const response = await fetch(`${this.baseUrl}/users/${userId}/locale`, {
      method: 'POST',
      headers: {
        'Authorization': `Bearer ${this.apiKey}`,
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({ locale })
    });
    
    return response.json();
  }
}

// Usage
const i18n = new I18nClient('YOUR_API_KEY');

// Detect language
const detection = await i18n.detectLanguage('Bienvenido a SportBeaconAI');
console.log('Detected language:', detection.locale);

// Translate prompt
const translation = await i18n.translatePrompt('Analyze this sports performance', 'es');
console.log('Translated:', translation.translated);

// Set user locale
await i18n.setUserLocale('user123', 'es');
```

## Rate Limits
- **Language Detection**: 1000 requests per minute
- **Translation**: 500 requests per minute
- **Locale Management**: 100 requests per minute

## Caching
Translation results are cached for 24 hours to improve performance. Cache keys include:
- Source text + target locale for prompt translations
- Translation key + locale for key translations

## Webhooks
I18n API supports webhooks for language preference changes:

```json
{
  "event": "user.locale_changed",
  "userId": "user123",
  "oldLocale": "en",
  "newLocale": "es",
  "timestamp": "2024-01-01T12:00:00Z"
}
``` 